import"./modulepreload-polyfill-9p4a8sJU.js";import{c as h,I as y,a as i}from"./item-card-H8M3J5qq.js";class f{constructor(a){this.addedReviews=[],this.itemId=a,this.restore()}add(a){this.addedReviews.push(a),this.synchronize()}getReviews(){return this.addedReviews}synchronize(){localStorage.setItem(`reviews-${this.itemId}`,JSON.stringify(this.addedReviews))}restore(){const a=localStorage.getItem(`reviews-${this.itemId}`);a&&(this.addedReviews=JSON.parse(a))}}async function I(){const s=document.querySelector(".reviews__button"),a=document.querySelector(".reviews__result");let r;function c(e,t,o){const n=document.createElement("div");n.className="post-container",n.innerHTML=`
    <div class="review-info">
        <p class="username">${e}</p>
        <p class="datetime">${o}</p>
    </div>
    <p class="comment">${t}</p>`,console.log(n),a.append(n),u()}function u(){document.getElementById("username").value="",document.querySelector("#review").value=""}function g(){r=document.getElementById("username").value;let e=r.substr(0,1).toUpperCase()+r.slice(1).toLowerCase();return console.log(e),e}function p(){const e=document.querySelector("#review").value;return console.log(e),e}function l(e=new Date){let t=e.getDay(),o=t===0?"ВС":t===1?"ПН":t===2?"ВТ":t===3?"СР":t===4?"ЧТ":t===5?"ПТ":t===6?"СБ":"Такого дня недели не существует",n=new Date;return n=`${o}, ${n.getDate()}.0${n.getMonth()+1}.${n.getFullYear()} в ${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}`,console.log(n),n}const v=new URL(document.location).searchParams,w=Number(v.get("id")),m=new f(w);m.addedReviews.forEach(({name:e,comment:t,published:o})=>c(e,t,l(new Date(o)))),s.addEventListener("click",()=>{const[e,t,o]=[g(),p(),l()];m.add({name:e,published:new Date,comment:t}),c(e,t,o)})}const $=document.getElementById("app"),d=document.createElement("div"),R=new URL(document.location).searchParams,S=Number(R.get("id")),C=h.jewelleries.filter(s=>s.id===S);d.className="grid grid-cols-1 gap-2 lg:grid-cols-4 md:grid-cols-2 lg:gap-8 py-10 m-auto";d.innerHTML=`
${C.map(s=>y(s,!0)).join("")}`;d.querySelectorAll("[data-add-cart-id]").forEach(s=>{s.addEventListener("click",a=>{a.preventDefault();const r=Number(s.dataset.addCartId),c=s.querySelector("span");i.has(r)?(i.remove(r),c.textContent="Добавить в корзину"):(i.add(r),c.textContent="Удалить из корзины")})});$.appendChild(d);I();
